{"version":3,"file":"main-BTO_U3ri.js","sources":["../../src/js/render-functions.js","../../src/js/pixabay-api.js","../../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet myGallery = new SimpleLightbox('.gallery a', {\n      overlayOpacity: 0.9,\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n\nexport function createGallery(data) {\n  const gallery = document.querySelector('.gallery');  \n\n  if (data.total != 0) {\n    let markup = data.hits\n      .map(\n        image => `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              src=\"${image.webformatURL}\"\n              data-source=\"${image.largeImageURL}\"\n              alt=\"${image.tags}\"\n            />\n          </a>          \n          <ul class='gallery-stat-list'>\n            <li class='gallery-stat-item'><p class='item-caption'>Likes</p><p class=\"item-value\">${image.likes}</p></li>\n            <li class='gallery-stat-item'><p class='item-caption'>Views</p><p class=\"item-value\">${image.views}</p></li>\n            <li class='gallery-stat-item'><p class='item-caption'>Comments</p><p class=\"item-value\">${image.comments}</p></li>\n            <li class='gallery-stat-item'><p class='item-caption'>Downloads</p><p class=\"item-value\">${image.downloads}</p></li>\n          </ul>          \n        </li>`\n      )\n      .join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);  \n    myGallery.refresh();      \n  } \n}\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function iziToastMes(message, color='red') {\n  iziToast.show({\n    icon: 'icon-person',\n    message: message,\n    color: color,\n    position: 'topRight', // bottomRight, bottomLeft, topRight, topLeft, topCenter, bottomCenter, center\n    transitionIn: 'bounceInDown', // bounceInLeft, bounceInRight, bounceInUp, bounceInDown, fadeIn, fadeInDown, fadeInUp, fadeInLeft, fadeInRight or flipInX\n    transitionOut: 'flipOutX', // fadeOut, fadeOutUp, fadeOutDown, fadeOutLeft, fadeOutRight, flipOutX\n    closeOnClick: true,\n    displayMode: 'replace', // once, replace\n    timeout: 3000,\n  });\n}\n","import axios from 'axios';\nimport { createGallery, iziToastMes } from './render-functions.js';\nconst loading = document.querySelector('.loader');\nconst btnMore = document.querySelector('.btn-more');\nconst per_page = 15;\n\nexport async function fetchMyRequest(searchValue, page) {\n  loading.classList.add('is-active');\n  btnMore.classList.remove('is-active');\n  await axios\n    .get('https://pixabay.com/api/?', {\n      params: {\n        key: `46676876-9d0aaf878b11d8c614d2fd644`,\n        q: searchValue,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: per_page,\n        page,\n      },\n    })\n    .then(response => {\n      if (response.data.totalHits > 0) {\n        const totalPages = Math.ceil(response.data.totalHits / per_page);\n        const imagesLeft = response.data.totalHits - per_page * page;\n        console.log('totalPages:' + totalPages);\n        console.log('current page:' + page);\n        console.log(`Images left: ${imagesLeft}`);\n\n        if (page > totalPages) {\n          btnMore.classList.remove('is-active');\n          loading.classList.remove('is-active');\n          iziToastMes(\n            `We're sorry, but you've reached the end of search results.`,\n            'green'\n          );\n        } else {\n\n          createGallery(response.data);\n          loading.classList.remove('is-active');\n          if (imagesLeft > 0) {\n            btnMore.classList.add('is-active');\n          } else {\n            btnMore.classList.remove('is-active');\n            iziToastMes(\n              `We're sorry, but you've reached the end of search results.`,\n              'green'\n            );\n          }a          \n          \n        }\n      } else {\n        console.log('–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ' + response.data.totalHits);\n        loading.classList.remove('is-active');\n        iziToastMes(\n          'Sorry, there are no images matching your search query. Please try again!'\n        );\n      }\n    })\n    .catch(error => console.log(error));\n}\n","import { fetchMyRequest } from './js/pixabay-api';\nimport { iziToastMes } from './js//render-functions';\n\nlet previousSearchValue = '';\nlet page = 1;\n\nconst btnMore = document.querySelector('.btn-more');\nbtnMore.addEventListener('click', handleBtnMoreClick);\n\nfunction handleBtnMoreClick() {\n  page++;\n  fetchMyRequest(previousSearchValue, page)\n    .then(() => {\n      const gallery = document.querySelector('.gallery');\n      console.log(gallery.children[0].getBoundingClientRect().height);\n      window.scrollBy(\n        0,\n        gallery.children[0].getBoundingClientRect().height * 2\n      );\n    })\n    .catch(error => console.log(error));\n}\n\nconst form = document.querySelector('.form');\nform.addEventListener('submit', handleSubmit);\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n\n  const currentSearchValue = event.target.elements.search.value.trim();\n\n  if (currentSearchValue !== '') {\n    if (previousSearchValue === currentSearchValue) {\n      // console.log('–ó–∞–ø—Ä–æ—Å –ø–æ–≤—Ç–æ—Ä–∏–ª—Å—è');\n      page++;\n    } else {\n      // console.log('–ù–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å');\n      const gallery = document.querySelector('.gallery');\n      gallery.innerHTML = '';\n      page = 1;\n      previousSearchValue = currentSearchValue;\n    }\n    fetchMyRequest(currentSearchValue, page);\n  } else {\n    iziToastMes('üö´ Please fill in the search images field');\n  }\n}\n"],"names":["myGallery","SimpleLightbox","createGallery","data","gallery","markup","image","iziToastMes","message","color","iziToast","loading","btnMore","per_page","fetchMyRequest","searchValue","page","axios","response","totalPages","imagesLeft","error","previousSearchValue","handleBtnMoreClick","form","handleSubmit","event","currentSearchValue"],"mappings":"6vBAGA,IAAIA,EAAY,IAAIC,EAAe,aAAc,CAC3C,eAAgB,GAChB,aAAc,MACd,aAAc,GACpB,CAAK,EAEE,SAASC,EAAcC,EAAM,CAClC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAEjD,GAAID,EAAK,OAAS,EAAG,CACnB,IAAIE,EAASF,EAAK,KACf,IACCG,GAAS;AAAA,0CACyBA,EAAM,aAAa;AAAA;AAAA;AAAA,qBAGxCA,EAAM,YAAY;AAAA,6BACVA,EAAM,aAAa;AAAA,qBAC3BA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,mGAIoEA,EAAM,KAAK;AAAA,mGACXA,EAAM,KAAK;AAAA,sGACRA,EAAM,QAAQ;AAAA,uGACbA,EAAM,SAAS;AAAA;AAAA,cAG/G,EACA,KAAK,EAAE,EAEVF,EAAQ,mBAAmB,YAAaC,CAAM,EAC9CL,EAAU,QAAO,CAClB,CACH,CAKO,SAASO,EAAYC,EAASC,EAAM,MAAO,CAChDC,EAAS,KAAK,CACZ,KAAM,cACN,QAASF,EACT,MAAOC,EACP,SAAU,WACV,aAAc,eACd,cAAe,WACf,aAAc,GACd,YAAa,UACb,QAAS,GACb,CAAG,CACH,CCpDA,MAAME,EAAU,SAAS,cAAc,SAAS,EAC1CC,EAAU,SAAS,cAAc,WAAW,EAC5CC,EAAW,GAEV,eAAeC,EAAeC,EAAaC,EAAM,CACtDL,EAAQ,UAAU,IAAI,WAAW,EACjCC,EAAQ,UAAU,OAAO,WAAW,EACpC,MAAMK,EACH,IAAI,4BAA6B,CAChC,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUF,EACV,KAAAG,CACD,CACP,CAAK,EACA,KAAKE,GAAY,CAChB,GAAIA,EAAS,KAAK,UAAY,EAAG,CAC/B,MAAMC,EAAa,KAAK,KAAKD,EAAS,KAAK,UAAYL,CAAQ,EACzDO,EAAaF,EAAS,KAAK,UAAYL,EAAWG,EACxD,QAAQ,IAAI,cAAgBG,CAAU,EACtC,QAAQ,IAAI,gBAAkBH,CAAI,EAClC,QAAQ,IAAI,gBAAgBI,CAAU,EAAE,EAEpCJ,EAAOG,GACTP,EAAQ,UAAU,OAAO,WAAW,EACpCD,EAAQ,UAAU,OAAO,WAAW,EACpCJ,EACE,6DACA,OACZ,IAGUL,EAAcgB,EAAS,IAAI,EAC3BP,EAAQ,UAAU,OAAO,WAAW,EAChCS,EAAa,EACfR,EAAQ,UAAU,IAAI,WAAW,GAEjCA,EAAQ,UAAU,OAAO,WAAW,EACpCL,EACE,6DACA,OACd,GACW,EAGX,MACQ,QAAQ,IAAI,oBAAsBW,EAAS,KAAK,SAAS,EACzDP,EAAQ,UAAU,OAAO,WAAW,EACpCJ,EACE,0EACV,CAEA,CAAK,EACA,MAAMc,GAAS,QAAQ,IAAIA,CAAK,CAAC,CACtC,CCzDA,IAAIC,EAAsB,GACtBN,EAAO,EAEX,MAAMJ,EAAU,SAAS,cAAc,WAAW,EAClDA,EAAQ,iBAAiB,QAASW,CAAkB,EAEpD,SAASA,GAAqB,CAC5BP,IACAF,EAAeQ,EAAqBN,CAAI,EACrC,KAAK,IAAM,CACV,MAAMZ,EAAU,SAAS,cAAc,UAAU,EACjD,QAAQ,IAAIA,EAAQ,SAAS,CAAC,EAAE,sBAAqB,EAAG,MAAM,EAC9D,OAAO,SACL,EACAA,EAAQ,SAAS,CAAC,EAAE,sBAAuB,EAAC,OAAS,CAC7D,CACA,CAAK,EACA,MAAMiB,GAAS,QAAQ,IAAIA,CAAK,CAAC,CACtC,CAEA,MAAMG,EAAO,SAAS,cAAc,OAAO,EAC3CA,EAAK,iBAAiB,SAAUC,CAAY,EAE5C,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EAEpB,MAAMC,EAAqBD,EAAM,OAAO,SAAS,OAAO,MAAM,OAE9D,GAAIC,IAAuB,GAAI,CAC7B,GAAIL,IAAwBK,EAE1BX,QACK,CAEL,MAAMZ,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,UAAY,GACpBY,EAAO,EACPM,EAAsBK,CACvB,CACDb,EAAea,EAAoBX,CAAI,CAC3C,MACIT,EAAY,2CAA2C,CAE3D"}